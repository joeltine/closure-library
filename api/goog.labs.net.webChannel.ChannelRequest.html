---
{edit_path: '', layout: api, page: goog.labs.net.webChannel.ChannelRequest, section: 2-api}
---
{% raw %}
<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>ChannelRequest</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><div class="content"><main><article><section class="intro"><div class="header"><div class="parentlink"><b>Namespace:</b> <a href="goog.labs.net.webChannel.html">goog.labs.net.webChannel</a></div><div class="codelink"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L59" target="_blank">View Source</a></div><h1 class="title"><div class="tags"><span class="final"></span><span class="struct"></span></div><div>class ChannelRequest</div></h1></div><div class="body"><p>A new ChannelRequest is created for each request to the server.</p>
<h3 class="name"><div>new ChannelRequest(<var>channel</var>, <var>channelDebug</var>, <var>opt_sessionId</var>, <var>opt_requestId</var>, <var>opt_retryId</var>)</div></h3><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>channel</var><code><a href="goog.labs.net.webChannel.Channel.html">goog.labs.net.webChannel.Channel</a></code><dd><p>The channel that owns this request.</p>
<dt class="type name"><var>channelDebug</var><code><a href="goog.labs.net.webChannel.WebChannelDebug.html">goog.labs.net.webChannel.WebChannelDebug</a></code><dd><p>A
WebChannelDebug to use for logging.</p>
<dt class="type name"><var>opt_sessionId</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>The session id for the channel.</p>
<dt class="type name"><var>opt_requestId</var><code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)=</code><dd><p>The request id for this request.</p>
<dt class="type name"><var>opt_retryId</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>=</code><dd><p>The retry id for this request.</p>
</dl></dd></div></section><section class="instance-methods"><h2>Instance Methods</h2><section class="property expandable" id="cancel"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L825" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>cancel()</div></h3></div><div class="body"><p>Cancels the request no matter what the underlying transport is.</p>
</div></section><section class="property expandable" id="getLastError"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L982" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>getLastError()</div></h3></div><div class="body"><p>If the request was not successful, returns the reason.</p>
<dl><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The last error.</p>
</dl></dd></dl></div></section><section class="property expandable" id="getLastStatusCode"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L991" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>getLastStatusCode()</div></h3></div><div class="body"><p>Returns the status code of the last request.</p>
<dl><dt class="spec">Returns</dt><dd><dl><dt class="type"><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The status code of the last request.</p>
</dl></dd></dl></div></section><section class="property expandable" id="getPostData"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L1022" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>getPostData()</div></h3></div><div class="body"><p>Returns the data for a post, if this request is a post.</p>
<dl><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The POST data provided by the request initiator.</p>
</dl></dd></dl></div></section><section class="property expandable" id="getRequestId"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L1012" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>getRequestId()</div></h3></div><div class="body"><p>Returns the request id for this request. Each request has a unique request
id and the request IDs are a sequential increasing count.</p>
<dl><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>|<a href=".globals.html#PredicateFunctionType">PredicateFunctionType</a>)</code><dd><p>The request ID.</p>
</dl></dd></dl></div></section><section class="property expandable" id="getRequestStartTime"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L1042" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>getRequestStartTime()</div></h3></div><div class="body"><p>Returns the time that the request started, if it has started.</p>
<dl><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The time the request started, as returned by goog.now().</p>
</dl></dd></dl></div></section><section class="property expandable" id="getSessionId"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L1001" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>getSessionId()</div></h3></div><div class="body"><p>Returns the session id for this channel.</p>
<dl><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|<a href=".globals.html#PredicateFunctionType">PredicateFunctionType</a>)</code><dd><p>The session ID.</p>
</dl></dd></dl></div></section><section class="property expandable" id="getSuccess"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L972" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>getSuccess()</div></h3></div><div class="body"><p>Indicates whether the request was successful. Only valid after the handler
is called to indicate completion of the request.</p>
<dl><dt class="spec">Returns</dt><dd><dl><dt class="type"><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>True if the request succeeded.</p>
</dl></dd></dl></div></section><section class="property expandable" id="getXhr"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L1032" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>getXhr()</div></h3></div><div class="body"><p>Returns the XhrIo request object.</p>
<dl><dt class="spec">Returns</dt><dd><dl><dt class="type"><code><a href="goog.net.XhrIo.html">goog.net.XhrIo</a></code><dd><p>Any XhrIo request created for this object.</p>
</dl></dd></dl></div></section><section class="property expandable" id="sendCloseRequest"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L800" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>sendCloseRequest(<var>uri</var>)</div></h3></div><div class="body"><p>Uses an IMG tag or navigator.sendBeacon to send an HTTP get to the server.</p>
<p>This is only currently used to terminate the connection, as an IMG tag is
the most reliable way to send something to the server while the page
is getting torn down.</p>
<p>Navigator.sendBeacon is available on Chrome and Firefox as a formal
solution to ensure delivery without blocking window close. See
https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon</p>
<p>For Chrome Apps, sendBeacon is always necessary due to Content Security
Policy (CSP) violation of using an IMG tag.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>uri</var><code><a href="goog.Uri.html">goog.Uri</a></code><dd><p>The uri to send a request to.</p>
</dl></dd></dl></div></section><section class="property expandable" id="setExtraHeaders"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L379" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>setExtraHeaders(<var>extraHeaders</var>)</div></h3></div><div class="body"><p>Sets extra HTTP headers to add to all the requests sent to the server.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>extraHeaders</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code><dd><p>The HTTP headers.</p>
</dl></dd></dl></div></section><section class="property expandable" id="setReadyStateChangeThrottle"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L400" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>setReadyStateChangeThrottle(<var>throttle</var>)</div></h3></div><div class="body"><p>Sets the throttle for handling onreadystatechange events for the request.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>throttle</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The throttle in ms.  A value of zero indicates
no throttle.</p>
</dl></dd></dl></div></section><section class="property expandable" id="setTimeout"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L389" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>setTimeout(<var>timeout</var>)</div></h3></div><div class="body"><p>Sets the timeout for a request</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>timeout</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The timeout in MS for when we fail the request.</p>
</dl></dd></dl></div></section><section class="property expandable" id="xmlHttpGet"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L434" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>xmlHttpGet(<var>uri</var>, <var>decodeChunks</var>, <var>hostPrefix</var>, <var>opt_noClose</var>)</div></h3></div><div class="body"><p>Uses XMLHTTP to send an HTTP GET to the server.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>uri</var><code><a href="goog.Uri.html">goog.Uri</a></code><dd><p>The uri of the request.</p>
<dt class="type name"><var>decodeChunks</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether to the result is expected to be
encoded for chunking and thus requires decoding.</p>
<dt class="type name"><var>hostPrefix</var><code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The host prefix, if we might be using a
secondary domain.  Note that it should also be in the URL, adding this
won&#39;t cause it to be added to the URL.</p>
<dt class="type name"><var>opt_noClose</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>=</code><dd><p>Whether to request that the tcp/ip connection
should be closed.</p>
</dl></dd></dl></div></section><section class="property expandable" id="xmlHttpPost"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L413" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>xmlHttpPost(<var>uri</var>, <var>postData</var>, <var>decodeChunks</var>)</div></h3></div><div class="body"><p>Uses XMLHTTP to send an HTTP POST to the server.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>uri</var><code><a href="goog.Uri.html">goog.Uri</a></code><dd><p>The uri of the request.</p>
<dt class="type name"><var>postData</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The data for the post body.</p>
<dt class="type name"><var>decodeChunks</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether to the result is expected to be
encoded for chunking and thus requires decoding.</p>
</dl></dd></dl></div></section></section><section class="static-functions"><h2>Static Functions</h2><section class="property expandable" id="ChannelRequest.createChannelRequest"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L1076" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>ChannelRequest.createChannelRequest(<var>channel</var>, <var>channelDebug</var>, <var>opt_sessionId</var>, <var>opt_requestId</var>, <var>opt_retryId</var>)</div></h3></div><div class="body"><p>Convenience factory method.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>channel</var><code><a href="goog.labs.net.webChannel.Channel.html">goog.labs.net.webChannel.Channel</a></code><dd><p>The channel object that owns this request.</p>
<dt class="type name"><var>channelDebug</var><code><a href="goog.labs.net.webChannel.WebChannelDebug.html">goog.labs.net.webChannel.WebChannelDebug</a></code><dd><p>A WebChannelDebug to use for logging.</p>
<dt class="type name"><var>opt_sessionId</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>The session id for the channel.</p>
<dt class="type name"><var>opt_requestId</var><code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)=</code><dd><p>The request id for this request.</p>
<dt class="type name"><var>opt_retryId</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>=</code><dd><p>The retry id for this request.</p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>!<a href="goog.labs.net.webChannel.ChannelRequest.html">goog.labs.net.webChannel.ChannelRequest</a></code><dd><p>The created channel request.</p>
</dl></dd></dl></div></section><section class="property expandable" id="ChannelRequest.errorStringFromCode"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L334" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>ChannelRequest.errorStringFromCode(<var>errorCode</var>, <var>statusCode</var>)</div></h3></div><div class="body"><p>Returns a useful error string for debugging based on the specified error
code.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>errorCode</var><code>?<a href="goog.labs.net.webChannel.ChannelRequest.Error.html">goog.labs.net.webChannel.ChannelRequest.Error</a></code><dd><p>The error code.</p>
<dt class="type name"><var>statusCode</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The HTTP status code.</p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The error string for the given code combination.</p>
</dl></dd></dl></div></section><section class="property expandable" id="ChannelRequest.supportsXhrStreaming"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/net/webchannel/channelrequest.js#L369" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>ChannelRequest.supportsXhrStreaming()</div></h3></div><div class="body"><p>Returns whether XHR streaming is supported on this browser.</p>
<dl><dt class="spec">Returns</dt><dd><dl><dt class="type"><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether XHR streaming is supported.</p>
</dl></dd><dt class="spec">See Also</dt><dd><p><a href="http://code.google.com/p/closure-library/issues/detail?id&#61;346">http://code.google.com/p/closure-library/issues/detail?id&#61;346</a></p>
</dd></dl></div></section></section><section class="types"><h2>Enumerations</h2><ul><li class="summary"><div><a href="goog.labs.net.webChannel.ChannelRequest.Error.html">ChannelRequest.Error</a></div><li class="summary"><div><a href="goog.labs.net.webChannel.ChannelRequest.Type_.html">ChannelRequest.Type_</a></div></ul></section></article></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><nav class="dossier-nav"><section><a class="title" href="index.html" tabindex="2">Overview</a></section><section class="types"><div class="toggle"><div class="title"><span class="item" tabindex="2">Types</span><i class="material-icons">expand_more</i></div></div></section></nav><script src="types.js"></script><script src="dossier.js"></script>
{% endraw %}
