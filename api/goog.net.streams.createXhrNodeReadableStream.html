---
{edit_path: '', layout: api, page: goog.net.streams.createXhrNodeReadableStream, section: 2-api}
---
{% raw %}
<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>goog.net.streams.createXhrNodeReadableStream</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><div class="content"><main><article><section class="intro"><div class="header"><div class="codelink"><a href="https://github.com/google/closure-library/blob/master/closure/goog/net/streams/streamfactory.js#L57" target="_blank">View Source</a></div><h1 class="title"><div>namespace goog.net.streams.createXhrNodeReadableStream</div></h1></div><div class="body"><p>Creates a new NodeReadableStream object using goog.net.xhrio as the
underlying HTTP request.</p>
<p>The XhrIo object should not have been sent to the network via its send()
method. NodeReadableStream callbacks are expected to be registered before
XhrIo.send() is invoked. The behavior of the stream is undefined if
otherwise. After send() is called, the lifecycle events are expected to
be handled directly via the stream API.</p>
<p>If a binary response (e.g. protobuf) is expected, the caller should configure
the xhrIo by setResponseType(goog.net.XhrIo.ResponseType.ARRAY_BUFFER)
before xhrIo.send() is invoked.</p>
<p>States specific to the xhr may be accessed before or after send() is called
as long as those operations are safe, e.g. configuring headers and options.</p>
<p>Timeout (deadlines), cancellation (abort) should be applied to
XhrIo directly and the stream object will respect any life cycle events
trigger by those actions.</p>
<p>Note for the release pkg:
&#34;--define goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR&#61;true&#34;
disable asserts</p>
<h3 class="name"><div>createXhrNodeReadableStream(<var>xhr</var>)</div></h3><dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>xhr</var><code>!<a href="goog.net.XhrIo.html">goog.net.XhrIo</a></code><dd><p>The XhrIo object with its response body to
be handled by NodeReadableStream.</p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code><a href="goog.net.streams.NodeReadableStream.html">goog.net.streams.NodeReadableStream</a></code><dd><p>the newly created stream or
null if streaming response is not supported by the current User Agent.</p>
</dl></dd></dl></div></section></article></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><nav class="dossier-nav"><section><a class="title" href="index.html" tabindex="2">Overview</a></section><section class="types"><div class="toggle"><div class="title"><span class="item" tabindex="2">Types</span><i class="material-icons">expand_more</i></div></div></section></nav><script src="types.js"></script><script src="dossier.js"></script>
{% endraw %}
