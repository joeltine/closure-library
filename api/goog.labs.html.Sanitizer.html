---
{edit_path: '', layout: api, page: goog.labs.html.Sanitizer, section: 2-api}
---
{% raw %}
<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>Sanitizer</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><div class="content"><main><article><section class="intro"><div class="header"><div class="parentlink"><b>Namespace:</b> <a href="goog.labs.html.html">goog.labs.html</a></div><div class="codelink"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/html/sanitizer.js#L41" target="_blank">View Source</a></div><h1 class="title"><div>class Sanitizer</div></h1></div><div class="body"><p>A sanitizer that converts untrusted, messy HTML into more regular HTML
that cannot abuse high-authority constructs like the ability to execute
arbitrary JavaScript.</p>
<h3 class="name"><div>new Sanitizer()</div></h3><dt class="spec">Parameters</dt><dd><dl><dd><p>None.</p></dl></dd></div></section><section class="instance-methods"><h2>Instance Methods</h2><section class="property expandable" id="allowAttributes"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/html/sanitizer.js#L194" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>allowAttributes(<var>elementNames</var>, <var>attrNames</var>, <var>opt_rewriteValue</var>)</div></h3></div><div class="body"><p>Allows in the sanitized output
<tt>&lt;<i>element</i> <i>attr</i>&#61;&#34;...&#34;&gt;</tt>
when <i>element</i> is in <code>elementNames</code> and
<i>attrNames</i> is in <code>attrNames</code>.</p>
<p>If specified, <code>opt_valueXform</code> is a function that takes the
HTML-entity-decoded attribute value, and can choose to disallow the
attribute by returning <code>null</code> or substitute a new value
by returning a string with the new value.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>elementNames</var><code>(!<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>&gt;|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code><dd><p>names (or name) on which the
attributes are allowed.</p>
<pre><code> Element names should be allowed via &lt;code&gt;allowElements(...)&lt;/code&gt; prior
 to white-listing attributes.

 The special element name &lt;code&gt;&amp;quot;*&amp;quot;&lt;/code&gt; has the same meaning as in CSS
 selectors: it can be used to white-list attributes like &lt;code&gt;title&lt;/code&gt;
 and &lt;code&gt;id&lt;/code&gt; which are widely available with element-agnostic
 meanings.

 It should not be used for attributes like &lt;code&gt;type&lt;/code&gt; whose meaning
 differs based on the element on which it appears:
 e.g. &lt;code&gt;&amp;lt;input type&#61;text&amp;gt;&lt;/code&gt; vs &lt;code&gt;&amp;lt;style type&#61;text/css&amp;gt;&lt;/code&gt;.
</code></pre>
<dt class="type name"><var>attrNames</var><code>(!<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>&gt;|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code><dd><p>names (or name) of the attribute
that should be allowed.</p>
<dt class="type name"><var>opt_rewriteValue</var><code><a href="goog.labs.html.html#goog.labs.html.AttributeRewriter">goog.labs.html.AttributeRewriter</a>=</code><dd><p>A function
that receives the HTML-entity-decoded attribute value and can return
<code>null</code> to disallow the attribute entirely or the value for the
attribute as a string.
</p><p>
The default is the identity function (<code>function(x){return x}</code>),
and the value rewriter is composed with an attribute specific handler:
<table><tr><th>href, src</th><td>Requires that the value be an absolute URL with a protocol in
(http, https, mailto) or a protocol relative URL.

</td></tr></table></p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>!<a href="goog.labs.html.Sanitizer.html">goog.labs.html.Sanitizer</a></code><dd><p><code>this</code>.</p>
</dl></dd></dl></div></section><section class="property expandable" id="allowElements"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/html/sanitizer.js#L131" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>allowElements(<var>var_args</var>)</div></h3></div><div class="body"><p>Adds the element names to the white-list of elements that are allowed
in the safe HTML output.</p>
 <p>
 Allowing elements does not, by itself, allow any attributes on
 those elements.
</p><dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>var_args</var><code>...!<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>element names that should be allowed in the
safe HTML output.</p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>!<a href="goog.labs.html.Sanitizer.html">goog.labs.html.Sanitizer</a></code><dd><p><code>this</code>.</p>
</dl></dd></dl></div></section><section class="property expandable" id="sanitize"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/labs/html/sanitizer.js#L101" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>sanitize(<var>unsafeHtml</var>)</div></h3></div><div class="body"><p>Yields a string of safe HTML that contains all and only the safe
text-nodes and elements in the input.</p>
 <p>
 For the purposes of this function, &#34;safe&#34; is defined thus:
 </p><ul><li>Contains only elements explicitly allowed via <code>this.allow*</code>.
   </li><li>Contains only attributes explicitly allowed via <code>this.allow*</code>
       and having had all relevant transformations applied.
   </li><li>Contains an end tag for all and only non-void open tags.
   </li><li>Tags nest per XHTML rules.
   </li><li>Tags do not nest beyond a finite but fairly large level.
 </li></ul>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>unsafeHtml</var><code>!<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>A string of HTML which need not originate with
a trusted source.</p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>!<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>A string of HTML that contains only tags and attributes
explicitly allowed by this sanitizer, and with end tags for all and only
non-void elements.</p>
</dl></dd></dl></div></section></section></article></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><nav class="dossier-nav"><section><a class="title" href="index.html" tabindex="2">Overview</a></section><section class="types"><div class="toggle"><div class="title"><span class="item" tabindex="2">Types</span><i class="material-icons">expand_more</i></div></div></section></nav><script src="types.js"></script><script src="dossier.js"></script>
{% endraw %}
