---
{edit_path: '', layout: api, page: goog.crypt.Arc4, section: 2-api}
---
{% raw %}
<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>Arc4</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><div class="content"><main><article><section class="intro"><div class="header"><div class="parentlink"><b>Namespace:</b> <a href="goog.crypt.html">goog.crypt</a></div><div class="codelink"><a href="https://github.com/google/closure-library/blob/master/closure/goog/crypt/arc4.js#L45" target="_blank">View Source</a></div><h1 class="title"><div class="tags"><span class="final"></span><span class="struct"></span></div><div>class Arc4</div></h1></div><div class="body"><p>ARC4 streamcipher implementation.</p>
<h3 class="name"><div>new Arc4()</div></h3><dt class="spec">Parameters</dt><dd><dl><dd><p>None.</p></dl></dd></div></section><section class="instance-methods"><h2>Instance Methods</h2><section class="property expandable" id="crypt"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/crypt/arc4.js#L143" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>crypt(<var>data</var>, <var>opt_length</var>)</div></h3></div><div class="body"><p>En- or decrypt (same operation for streamciphers like ARC4)</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>data</var><code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>&gt;|Uint8Array)</code><dd><p>The data to be xor-ed in place.</p>
<dt class="type name"><var>opt_length</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>=</code><dd><p>The number of bytes to crypt.</p>
</dl></dd></dl></div></section><section class="property expandable" id="discard"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/crypt/arc4.js#L119" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>discard(<var>length</var>)</div></h3></div><div class="body"><p>Discards n bytes of the keystream.
These days 1536 is considered a decent amount to drop to get the key state
warmed-up enough for secure usage. This is not done in the constructor to
preserve efficiency for use cases that do not need this.
NOTE: Discard is identical to crypt without actually xoring any data. It&#39;s
unfortunate to have this code duplicated, but this was done for performance
reasons. Alternatives which were attempted:</p>
<ol><li>Create a temp array of the correct length and pass it to crypt. This
works but needlessly allocates an array. But more importantly this
requires choosing an array type (Array or Uint8Array) in discard, and
choosing a different type than will be passed to crypt by the client
code hurts the javascript engines ability to optimize crypt (7x hit in
v8).</li><li>Make data option in crypt so discard can pass null, this has a huge
perf hit for crypt.</li></ol>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>length</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>Number of bytes to disregard from the stream.</p>
</dl></dd></dl></div></section><section class="property expandable" id="setKey"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/crypt/arc4.js#L74" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>setKey(<var>key</var>, <var>opt_length</var>)</div></h3></div><div class="body"><p>Initialize the cipher for use with new key.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>key</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>&gt;</code><dd><p>A byte array containing the key.</p>
<dt class="type name"><var>opt_length</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>=</code><dd><p>Indicates # of bytes to take from the key.</p>
</dl></dd></dl></div></section></section></article></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><nav class="dossier-nav"><section><a class="title" href="index.html" tabindex="2">Overview</a></section><section class="types"><div class="toggle"><div class="title"><span class="item" tabindex="2">Types</span><i class="material-icons">expand_more</i></div></div></section></nav><script src="types.js"></script><script src="dossier.js"></script>
{% endraw %}
