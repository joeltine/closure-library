---
{edit_path: '', layout: api, page: goog.html.SafeUrl, section: 2-api}
---
{% raw %}
<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>SafeUrl</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><div class="content"><main><article><section class="intro"><div class="header"><div class="parentlink"><b>Namespace:</b> <a href="goog.html.html">goog.html</a></div><div class="codelink"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L70" target="_blank">View Source</a></div><h1 class="title"><div class="tags"><span class="final"></span><span class="struct"></span></div><div>class SafeUrl</div></h1></div><div class="body"><dl><dt class="spec">All implemented interfaces<dd><code><a href="goog.i18n.bidi.DirectionalString.html">goog.i18n.bidi.DirectionalString</a></code><dd><code><a href="goog.string.TypedString.html">goog.string.TypedString</a></code></dl><p>A string that is safe to use in URL context in DOM APIs and HTML documents.</p>
<p>A SafeUrl is a string-like object that carries the security type contract
that its value as a string will not cause untrusted script execution
when evaluated as a hyperlink URL in a browser.</p>
<p>Values of this type are guaranteed to be safe to use in URL/hyperlink
contexts, such as, assignment to URL-valued DOM properties, or
interpolation into a HTML template in URL context (e.g., inside a href
attribute), in the sense that the use will not result in a
Cross-Site-Scripting vulnerability.</p>
<p>Note that, as documented in <code>goog.html.SafeUrl.unwrap</code>, this type&#39;s
contract does not guarantee that instances are safe to interpolate into HTML
without appropriate escaping.</p>
<p>Note also that this type&#39;s contract does not imply any guarantees regarding
the resource the URL refers to.  In particular, SafeUrls are <b>not</b>
safe to use in a context where the referred-to resource is interpreted as
trusted code, e.g., as the src of a script tag.</p>
<p>Instances of this type must be created via the factory methods
(<code>goog.html.SafeUrl.fromConstant</code>, <code>goog.html.SafeUrl.sanitize</code>),
etc and not by invoking its constructor.  The constructor intentionally
takes no parameters and the type is immutable; hence only a default instance
corresponding to the empty string can be obtained via constructor invocation.</p>
<h3 class="name"><div>new SafeUrl()</div></h3><dt class="spec">Parameters</dt><dd><dl><dd><p>None.</p></dl></dd><dt class="spec">See Also</dt><dd><a href="goog.html.SafeUrl.html#SafeUrl.fromConstant">goog.html.SafeUrl#fromConstant</a></dd><dd><a href="goog.html.SafeUrl.html">goog.html.SafeUrl#from</a></dd><dd><a href="goog.html.SafeUrl.html#SafeUrl.sanitize">goog.html.SafeUrl#sanitize</a></dd></div></section><section class="instance-methods"><h2>Instance Methods</h2><section class="property expandable" id="getDirection"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L164" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>getDirection()</div></h3></div><div class="body"><p>Returns this URLs directionality, which is always <code>LTR</code>.</p>
<dl><dt class="spec">Specified by</dt><dd><a href="goog.i18n.bidi.DirectionalString.html#getDirection">goog.i18n.bidi.DirectionalString</a></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The known direction. Null if unknown.</p>
</dl></dd></dl></div></section><section class="property expandable" id="getTypedStringValue"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L148" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>getTypedStringValue()</div></h3></div><div class="body"><p>Returns this SafeUrl&#39;s value a string.</p>
<p>IMPORTANT: In code where it is security relevant that an object&#39;s type is
indeed <code>SafeUrl</code>, use <code>goog.html.SafeUrl.unwrap</code> instead of this
method. If in doubt, assume that it&#39;s security relevant. In particular, note
that goog.html functions which return a goog.html type do not guarantee that
the returned instance is of the right type. For example:</p>
 <pre>
 var fakeSafeHtml &#61; new String(&#39;fake&#39;);
 fakeSafeHtml.__proto__ &#61; goog.html.SafeHtml.prototype;
 var newSafeHtml &#61; goog.html.SafeHtml.htmlEscape(fakeSafeHtml);
 // newSafeHtml is just an alias for fakeSafeHtml, it&#39;s passed through by
 // goog.html.SafeHtml.htmlEscape() as fakeSafeHtml instanceof
 // goog.html.SafeHtml.
 </pre>
<p>IMPORTANT: The guarantees of the SafeUrl type contract only extend to the
behavior of browsers when interpreting URLs. Values of SafeUrl objects MUST
be appropriately escaped before embedding in a HTML document. Note that the
required escaping is context-sensitive (e.g. a different escaping is
required for embedding a URL in a style property within a style
attribute, as opposed to embedding in a href attribute).</p>
<dl><dt class="spec">Specified by</dt><dd><a href="goog.string.TypedString.html#getTypedStringValue">goog.string.TypedString</a></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>!<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The wrapped string&#39;s value.</p>
</dl></dd><dt class="spec">See Also</dt><dd><a href="goog.html.SafeUrl.html#SafeUrl.unwrap">goog.html.SafeUrl#unwrap</a></dd></dl></div></section><section class="property expandable" id="toString"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L179" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>toString()</div></h3></div><div class="body"><p>Returns a debug string-representation of this value.</p>
<p>To obtain the actual string value wrapped in a SafeUrl, use
<code>goog.html.SafeUrl.unwrap</code>.</p>
<dl><dt class="spec">Returns</dt><dd><dl><dt class="type"><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code></dl></dd><dt class="spec">See Also</dt><dd><a href="goog.html.SafeUrl.html#SafeUrl.unwrap">goog.html.SafeUrl#unwrap</a></dd></dl></div></section></section><section class="instance-properties"><h2>Instance Properties</h2><section class="property expandable" id="implementsGoogI18nBidiDirectionalString"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L157" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div class="tags"><span class="const"></span></div><div>implementsGoogI18nBidiDirectionalString</div></h3></div><div class="body"><p>Interface marker of the DirectionalString interface.</p>
<p>This property can be used to determine at runtime whether or not an object
implements this interface.  All implementations of this interface set this
property to <code>true</code>.</p>
<dl><dt class="spec">Type<dd><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></dd><dt class="spec">Specified by</dt><dd><a href="goog.i18n.bidi.DirectionalString.html#implementsGoogI18nBidiDirectionalString">goog.i18n.bidi.DirectionalString</a></dd></dl></div></section><section class="property expandable" id="implementsGoogStringTypedString"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L117" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div class="tags"><span class="const"></span></div><div>implementsGoogStringTypedString</div></h3></div><div class="body"><p>Interface marker of the TypedString interface.</p>
<p>This property can be used to determine at runtime whether or not an object
implements this interface.  All implementations of this interface set this
property to <code>true</code>.</p>
<dl><dt class="spec">Type<dd><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></dd><dt class="spec">Specified by</dt><dd><a href="goog.string.TypedString.html#implementsGoogStringTypedString">goog.string.TypedString</a></dd></dl></div></section></section><section class="static-functions"><h2>Static Functions</h2><section class="property expandable" id="SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L398" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div class="tags"><span class="package"></span></div><div>SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(<var>url</var>)</div></h3></div><div class="body"><p>Package-internal utility method to create SafeUrl instances.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>url</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The string to initialize the SafeUrl object with.</p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>!<a href="goog.html.SafeUrl.html">goog.html.SafeUrl</a></code><dd><p>The initialized SafeUrl object.</p>
</dl></dd></dl></div></section><section class="property expandable" id="SafeUrl.fromBlob"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L265" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>SafeUrl.fromBlob(<var>blob</var>)</div></h3></div><div class="body"><p>Creates a SafeUrl wrapping a blob URL for the given <code>blob</code>.</p>
<p>The blob URL is created with <code>URL.createObjectURL</code>. If the MIME type
for <code>blob</code> is not of a known safe image or video MIME type, then the
SafeUrl will wrap <a href="goog.html.SafeUrl.html#SafeUrl.INNOCUOUS_STRING"><code>#INNOCUOUS_STRING</code></a>.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>blob</var><code>!Blob</code></dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>!<a href="goog.html.SafeUrl.html">goog.html.SafeUrl</a></code><dd><p>The blob URL, or an innocuous string wrapped
as a SafeUrl.</p>
</dl></dd><dt class="spec">See Also</dt><dd><p><a href="http://www.w3.org/TR/FileAPI/#url">http://www.w3.org/TR/FileAPI/#url</a></p>
</dd></dl></div></section><section class="property expandable" id="SafeUrl.fromConstant"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L236" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>SafeUrl.fromConstant(<var>url</var>)</div></h3></div><div class="body"><p>Creates a SafeUrl object from a compile-time constant string.</p>
<p>Compile-time constant strings are inherently program-controlled and hence
trusted.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>url</var><code>!<a href="goog.string.Const.html">goog.string.Const</a></code><dd><p>A compile-time-constant string from which to
create a SafeUrl.</p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>!<a href="goog.html.SafeUrl.html">goog.html.SafeUrl</a></code><dd><p>A SafeUrl object initialized to <code>url</code>.</p>
</dl></dd></dl></div></section><section class="property expandable" id="SafeUrl.fromDataUrl"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L290" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>SafeUrl.fromDataUrl(<var>dataUrl</var>)</div></h3></div><div class="body"><p>Creates a SafeUrl wrapping a data: URL, after validating it matches a
known-safe image or video MIME type.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>dataUrl</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>A valid base64 data URL with one of the whitelisted
image or video MIME types.</p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>!<a href="goog.html.SafeUrl.html">goog.html.SafeUrl</a></code><dd><p>A matching safe URL, or <code>INNOCUOUS_STRING</code>
wrapped as a SafeUrl if it does not pass.</p>
</dl></dd></dl></div></section><section class="property expandable" id="SafeUrl.fromTelUrl"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L310" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>SafeUrl.fromTelUrl(<var>telUrl</var>)</div></h3></div><div class="body"><p>Creates a SafeUrl wrapping a tel: URL.</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>telUrl</var><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>A tel URL.</p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>!<a href="goog.html.SafeUrl.html">goog.html.SafeUrl</a></code><dd><p>A matching safe URL, or <code>INNOCUOUS_STRING</code>
wrapped as a SafeUrl if it does not pass.</p>
</dl></dd></dl></div></section><section class="property expandable" id="SafeUrl.sanitize"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L367" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>SafeUrl.sanitize(<var>url</var>)</div></h3></div><div class="body"><p>Creates a SafeUrl object from <code>url</code>. If <code>url</code> is a
goog.html.SafeUrl then it is simply returned. Otherwise the input string is
validated to match a pattern of commonly used safe URLs.</p>
<p><code>url</code> may be a URL with the http, https, mailto or ftp scheme,
or a relative URL (i.e., a URL without a scheme; specifically, a
scheme-relative, absolute-path-relative, or path-relative URL).</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>url</var><code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|!<a href="goog.string.TypedString.html">goog.string.TypedString</a>)</code><dd><p>The URL to validate.</p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code>!<a href="goog.html.SafeUrl.html">goog.html.SafeUrl</a></code><dd><p>The validated URL, wrapped as a SafeUrl.</p>
</dl></dd><dt class="spec">See Also</dt><dd><p><a href="http://url.spec.whatwg.org/#concept-relative-url">http://url.spec.whatwg.org/#concept-relative-url</a></p>
</dd></dl></div></section><section class="property expandable" id="SafeUrl.unwrap"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L203" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div>SafeUrl.unwrap(<var>safeUrl</var>)</div></h3></div><div class="body"><p>Performs a runtime check that the provided object is indeed a SafeUrl
object, and returns its value.</p>
<p>IMPORTANT: The guarantees of the SafeUrl type contract only extend to the
behavior of  browsers when interpreting URLs. Values of SafeUrl objects MUST
be appropriately escaped before embedding in a HTML document. Note that the
required escaping is context-sensitive (e.g. a different escaping is
required for embedding a URL in a style property within a style
attribute, as opposed to embedding in a href attribute).</p>
<dl><dt class="spec">Parameters</dt><dd><dl><dt class="type name"><var>safeUrl</var><code>!<a href="goog.html.SafeUrl.html">goog.html.SafeUrl</a></code><dd><p>The object to extract from.</p>
</dl></dd><dt class="spec">Returns</dt><dd><dl><dt class="type"><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The SafeUrl object&#39;s contained string, unless the run-time
type check fails. In that case, <code>unwrap</code> returns an innocuous
string, or, if assertions are enabled, throws
<code>goog.asserts.AssertionError</code>.</p>
</dl></dd></dl></div></section></section><section class="static-properties"><h2>Static Properties</h2><section class="property expandable" id="SafeUrl.ABOUT_BLANK"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L410" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div class="tags"><span class="const"></span></div><div>SafeUrl.ABOUT_BLANK</div></h3></div><div class="body"><p>A SafeUrl corresponding to the special about:blank url.</p>
<dl><dt class="spec">Type<dd>!<a href="goog.html.SafeUrl.html">goog.html.SafeUrl</a></dd></dl></div></section><section class="property expandable" id="SafeUrl.INNOCUOUS_STRING"><div class="header"><div class="code-link"><a href="https://github.com/google/closure-library/blob/master/closure/goog/html/safeurl.js#L110" target="_blank" title="View source"><i class="material-icons">code</i></a></div><h3 class="name"><div class="tags"><span class="const"></span></div><div>SafeUrl.INNOCUOUS_STRING</div></h3></div><div class="body"><p>The innocuous string generated by goog.html.SafeUrl.sanitize when passed
an unsafe URL.</p>
<p>about:invalid is registered in
http://www.w3.org/TR/css3-values/#about-invalid.
http://tools.ietf.org/html/rfc6694#section-2.2.1 permits about URLs to
contain a fragment, which is not to be considered when determining if an
about URL is well-known.</p>
<p>Using about:invalid seems preferable to using a fixed data URL, since
browsers might choose to not report CSP violations on it, as legitimate
CSS function calls to attr() can result in this URL being produced. It is
also a standard URL which matches exactly the semantics we need:
&#34;The about:invalid URI references a non-existent document with a generic
error condition. It can be used when a URI is necessary, but the default
value shouldn&#39;t be resolveable as any type of document&#34;.</p>
<dl><dt class="spec">Type<dd><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></dd></dl></div></section></section></article></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><nav class="dossier-nav"><section><a class="title" href="index.html" tabindex="2">Overview</a></section><section class="types"><div class="toggle"><div class="title"><span class="item" tabindex="2">Types</span><i class="material-icons">expand_more</i></div></div></section></nav><script src="types.js"></script><script src="dossier.js"></script>
{% endraw %}
